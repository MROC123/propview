<div class="container mt-4">
  <div>
    <div class="property-page-top">

      <div class="property-photos-card p-3">

      <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="true">
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3" aria-label="Slide 4"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="4" aria-label="Slide 5"></button>
        </div>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="d-block w-100 object-fit-cover" height="525px" alt="...">
          </div>
          <div class="carousel-item">
            <img src="https://plus.unsplash.com/premium_photo-1674815327132-6a17c43761ae?q=80&w=1270&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="d-block w-100 object-fit-cover" height="525px" alt="...">
          </div>
          <div class="carousel-item">
            <img src="https://images.unsplash.com/photo-1618220179428-22790b461013?q=80&w=1227&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="d-block w-100 object-fit-cover" height="525px" alt="...">
          </div>
          <div class="carousel-item">
            <img src="https://images.unsplash.com/photo-1616046229478-9901c5536a45?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="d-block w-100 object-fit-cover" height="525px" alt="...">
          </div>
          <div class="carousel-item">
            <img src="https://images.unsplash.com/photo-1502005229762-cf1b2da7c5d6?q=80&w=1287&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="d-block w-100 object-fit-cover" height="525px" alt="...">
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

      </div>

    </div>
      <div class="property-info-top p-3">

          <div class="property-info-top-address-rating">
            <div>
              <h1 class="property-show-title text-left"><%= @property.address %></h1>
            </div>
            <div>
              <h1 class="property-show-title text-left review-pro"><%= ratingvalue = @property.reviews.map { |review| review.rating }
                if ratingvalue.empty?
                  ""
                else
              "★ #{(ratingvalue.sum / ratingvalue.count).round(1)}"
              end
              %></h1>
            </div>
          </div>

            <div class="property-info-top-info">

              <div class="property-show-title-property_type">
                <p class="info-name"><strong>PROPERTY TYPE</strong></p>
                <p class="text-left m-0"><%= @property.property_type %></p>
              </div>

              <div class="property-show-title-beds">
                <p class="info-name"><strong>BEDS</strong></p>
                <p class="text-left m-0"><%= @property.bedrooms %></p>
              </div>

              <div class="property-show-title-bathroom">
                <p class="info-name"><strong>BATHROOMS</strong></p>
                <p class="text-left m-0"><%= @property.bathrooms %></p>
              </div>

              <div class="property-show-title-reviews">
                <p class="info-name"><strong>No. of Reviews</strong></p>
                <p class="text-left m-0""><%= @property.reviews.count %></p>
              </div>

            </div>

      </div>

    <div class="property-review-similar">
      <div class="col-12 col-lg-9 ">
        <div class="reviews-card">
            <div class="review-on-top">
              <h2>Reviews:</h2>
              <button class="select-button"><%= link_to "Add a Review", new_manager_review_path(@manager, property_id: @property.id) %></button>
            </div>

          <div class="review-section">
              <% @property.reviews.reverse.each do |review| %>
                  <div class="review-cards">
                    <div class="review-cards-top-line">
                      <h2><%= review.title %></h2>
                      <h3>★ <%= review.rating %></h3>
                    </div>
                      <p class="review-cards-date"><small><%= review.created_at.strftime('%d/%m/%Y') %></small></p>
                      <div class="review-cards-content">
                        <h4 class="review-pro">Pros:</h4>
                        <p>''<%= review.pros %>''</p>
                        <h4 class="review-con">Cons:</h4>
                        <p>''<%= review.cons %>''</p>
                        <h4>Advice:</h4>
                        <p>''<%= review.advice %>''</p>
                      </div>
                      <div class="review-cards-ras">
                        <p> <%= review.rent.nil? ? "" : "Rent: #{review.rent.to_i} p.m" %></p>
                        <p><%= review.service_charge.nil? ? "" : "Service Charge: #{review.service_charge.to_i} p.a" %></p>
                      </div>
                  </div>
              <% end %>
            </div>
          </div>

          <div class="mt-4">
            <div class="map-card">
              <div>
                <h2 class="map-property-name"><%= @property.address %></h2>
              <div style="width: 100%; height: 600px;"
                data-controller="map"
                data-map-marker-value="<%= @marker.to_json %>"
                data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
              </div>
            </div>
          </div>


      </div>





          <div class="similar-properties-card-right col-12 col-lg-3">
              <div class="right-side-properties">
                <div class="building-company-card">
                  <div class="photos-border rounded">
                    <h3 class="building-comany-heading"><%= @property.manager.name %></h3>
                      <div class="p-2">
                        <img class="company-property-photo-small" src="https://img.freepik.com/premium-vector/company-icon-simple-element-illustration-company-concept-symbol-design-can-be-used-web-mobile_159242-7784.jpg" alt="house" width="100%">
                      </div>
                    <p class="manager-address-card"><%= @manager.address %></p>

                      <div class="d-flex justify-content-center">
                        <button class="select-button" role="button"><%= link_to "See More", manager_path(@property.manager), class: "text-decoration-none text-black"  %>
                      </div>

                  </div>
                </div>

                <div class="similar-properties mt-3">
                <h3>Similar Properties</h3>

                </div>

            </div>

          </div>
      </div>


</div>
